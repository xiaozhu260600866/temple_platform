(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shop-order-buy-index"],{1402:function(e,t,r){var i=r("24fb");t=i(!1),t.push([e.i,'.pay .weui-label{width:95px}.pay .box-item{margin-bottom:12px;background:#fff}.pay .weui-cell{padding:8px 15px;color:#333}\r\n/* 金额 */.pay-price .item{min-width:calc(25% - 10px);margin:5px;border:1px #e1e1e1 solid;border-radius:4px;text-align:center;line-height:36px;height:38px;padding:0 10px}.pay-price .item .price{color:#aaa;text-align:center;font-size:18px;color:#ff721f}.pay-price .item.select{background:#ff721f;border-color:#ff721f}.pay-price .item.select .price{color:#fff!important}.pay-price .other{-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow:hidden;width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.pay-price .other.select{background:#fff}.anonymous .select{width:14px;height:14px;border:1px #ccc solid;border-radius:3px;margin-right:3px}.anonymous .yes:before{content:"";display:block;width:8px;height:4px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);border-width:0 0 1px 1px;border-style:solid;border-color:red;margin-top:2px;margin-left:2px}.order-price .weui-cell{padding:0 15px}.content .weui-cell{border-bottom:0}\r\n/* .content .weui-input{line-height: 20px;color: #999;width: 100%;border: 1px #e1e1e1 solid;padding: 10px;border-radius: 6px;} */.pay .top{border-top:1px solid #dad7d0;border-bottom:1px solid #d2d2d2;line-height:40px}.pay .top .tip{color:#56504d}.pay .top .close{width:40px;height:40px;text-align:center}.pay .box{margin:20px}.pay .box .tb{width:100%;font-size:16px;color:#b0a7a2}.pay .box .tb .ed{border:2px solid #f37b30;background:url(http://wx.ciensi.net/m/picture/yqj_selected.png) no-repeat 100% 0}.pay .box .tb .sel{font-size:14px;line-height:26px;border:1px solid #c5c0b8;border-radius:5px;word-break:break-all;word-wrap:break-word;background:#fff;padding:4px 5px;text-align:center;width:100%;outline:none;height:38px;color:#000}.pay .box .Info .sel{display:-webkit-box;display:-webkit-flex;display:flex;text-align:left}.pay .box .Info .sel .name{color:red}.pay .box .Info .sel .input{-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow:hidden;width:100%;text-align:left}\r\n/* .pay .anonymous .anonymouscheck {width: 12px;height: 12px;vertical-align: -1px;}\r\n.pay .anonymous {font-size: 14px;color: #b0a7a2;margin-top: 10px;text-align: center;} */.other{width:14px;height:14px;float:right;margin-right:-5px;margin-top:-5px;display:block}.pay .box .tb .sel uni-input{border:0;width:90px;height:25px;font-size:16px;color:#fc7d37;text-align:center;-webkit-appearance:none}.pay .box .btn_{margin-top:18px;width:100%;height:37px;line-height:35px;font-size:16px;color:#fff;display:inline-block;border-radius:5px;text-align:center;background:#ff6c0a}.remark{font-size:14px;line-height:26px;border:1px solid #c5c0b8;border-radius:5px;word-break:break-all;word-wrap:break-word;background:#fff;padding:4px 5px;text-align:left;width:100%;outline:none}',""]),e.exports=t},"192b":function(e,t,r){var i=r("24fb");t=i(!1),t.push([e.i,"/* 计算与优惠信息 */#calculation{padding:%?20?% 0}#calculation .list-group{padding:0 %?30?%;line-height:%?80?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}#calculation .list-group .txt{font-size:%?32?%}",""]),e.exports=t},"1a2a":function(e,t,r){var i=r("43a2");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=r("4f06").default;a("449f8266",i,!0,{sourceMap:!1,shadowMode:!1})},"246c":function(e,t,r){"use strict";var i=r("1a2a"),a=r.n(i);a.a},"2e1c":function(e,t,r){"use strict";var i=r("4ea4");r("b680"),r("acd8"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("fea7"),r("d8b7");var a=i(r("7a58")),o=i(r("379c")),s={components:{uParse:a.default,orderPro:o.default},data:function(){return{formAction:"/shop/order/detail",mpType:"page",data:this.formatData(this),amountArr:[],showType:0,ruleform:{name:"",phone:"",amount:20,otheramount:"",is_post:3,type:1,evaluate:""},vaildate:{},open:!1,yunfei:0,getSiteName:this.getSiteName(),sendTypeArr:[{label:"需要",value:1},{label:"不需要",value:2}]}},computed:{amount:function(){var e=0;return this.ruleform.amount&&(e+=parseFloat(this.ruleform.amount)),this.ruleform.amount&&this.ruleform.is_top&&(e+=parseFloat(this.ruleform.top_price)),e.toFixed(2)}},onShareAppMessage:function(){return this.shareSource(this,"商城")},onLoad:function(e){this.ajax()},methods:{selectAddressCallBack:function(e){"-1.00"!=this.ruleform.yunfei&&("广东省"!=e.provinceName?this.yunfei=20:this.yunfei=12)},formSubmitForH5:function(e,t){var r=this;this.updateUrl(["/pages/index/index"]),this.payUniapp(e,(function(e){return r.goto("/pages/shop/order/payed/index?order_no="+t)}),(function(e){return r.goto("/pages/shop/order/payed/index?order_no="+t)}))},formSubmit:function(){var e=this;if(!this.ruleform.bless_address)return this.getError("请选择所在地区"),!1;if(!this.ruleform.bless_address2)return this.getError("地址不能为空"),!1;if(this.ruleform.can_post&&3==this.ruleform.is_post)return this.getError("请选择是否需要邮寄"),!1;if(!this.ruleform.bless_name)return this.getError("功德主不能为空"),!1;if(!this.open&&!this.ruleform.phone&&this.ruleform.phone_require)return this.getError("電話不能為空"),!1;if(this.ruleform.phone){var t=/(^1[3|4|5|7|8|9]\d{9}$)|(^09\d{8}$)/;if(!t.test(this.ruleform.phone))return this.getError("手机格式不正确"),!1}if(this.ruleform.address_require&&!this.ruleform.bless_address)return this.getError("地址不能为空"),!1;this.ruleform.yunfei=this.yunfei,this.ruleform.bless_address+=this.ruleform.bless_address2,this.postAjax(this.formAction,this.ruleform).then((function(t){2==t.data.status&&e.formSubmitForH5(t.data.config,t.data.detail.order_no)}))},ajax:function(){var e=this;this.getAjax(this).then((function(t){e.ruleform=t.detail,e.ruleform.evaluate=t.product.evaluate,"-1.00"==e.ruleform.yunfei?e.yunfei=0:e.yunfei=12}))}}};t.default=s},"33cc":function(e,t,r){"use strict";var i;r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return i}));var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{class:["order_pro",e.myclass?e.myclass:""]},e._l(e.data,(function(t,i){return r("v-uni-view",{staticClass:"order_info"},[r("v-uni-view",{staticClass:"opro_img"},[r("v-uni-image",{staticClass:"img",attrs:{src:t.getProduct.firstCover,mode:"aspectFill"}})],1),r("v-uni-view",{staticClass:"opro_info"},[r("v-uni-view",{staticClass:"Titem"},[r("v-uni-view",{staticClass:"left"},[r("v-uni-view",{staticClass:"name"},[e._v(e._s(t.getProduct.name))]),t.attribute?r("v-uni-view",{staticClass:"specs"},[e._v(e._s(t.attribute))]):e._e()],1),r("v-uni-view",{staticClass:"right"},[r("v-uni-view",{staticClass:"price"},[e._v("￥"+e._s(e.toFixed(t.amount/t.num)))]),r("v-uni-view",{staticClass:"num"},[e._v("x "+e._s(t.num))])],1)],1),r("v-uni-view",{staticClass:"scount fs-14"},[e._v("小计："),r("v-uni-text",{staticClass:"Arial"},[e._v(e._s(t.amount))]),e._v("元")],1)],1)],1)})),1)},o=[]},"379c":function(e,t,r){"use strict";r.r(t);var i=r("33cc"),a=r("cf18");for(var o in a)"default"!==o&&function(e){r.d(t,e,(function(){return a[e]}))}(o);r("246c");var s,n=r("f0c5"),l=Object(n["a"])(a["default"],i["b"],i["c"],!1,null,"9143d3c4",null,!1,i["a"],s);t["default"]=l.exports},"43a2":function(e,t,r){var i=r("24fb");t=i(!1),t.push([e.i,".order_pro[data-v-9143d3c4]{padding:0 %?20?%}.order_info[data-v-9143d3c4]{display:-webkit-box;display:-webkit-flex;display:flex;padding:%?20?% 0;border-bottom:%?1?% #f5f5f5 dashed}.order_info[data-v-9143d3c4]:last-child{border-bottom:0}.order_info .opro_img[data-v-9143d3c4]{padding-right:%?20?%}.order_info .opro_img .img[data-v-9143d3c4]{width:%?140?%;height:%?140?%;display:-webkit-box;display:-webkit-flex;display:flex;border-radius:%?6?%}.order_info .opro_info[data-v-9143d3c4]{-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-content:space-between;align-content:space-between}.order_info .Titem[data-v-9143d3c4]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;width:100%;line-height:%?40?%;font-size:%?30?%;color:#333}.order_info .Titem .left[data-v-9143d3c4]{-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow:hidden}.order_info .Titem .right[data-v-9143d3c4]{text-align:right;padding-left:%?20?%}.order_info .Titem .name[data-v-9143d3c4]{font-size:%?32?%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.order_info .Titem .specs[data-v-9143d3c4]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:#666}.order_info .Titem .num[data-v-9143d3c4]{color:#666}.order_info .scount[data-v-9143d3c4]{text-align:right;width:100%}",""]),e.exports=t},"5c54":function(e,t,r){"use strict";r("4160"),r("a15b"),r("ac1f"),r("1276"),r("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={props:["data","myclass"],data:function(){return{}},methods:{getAttribute:function(e){var t=[];return e.split(",").forEach((function(e,r){0!=r&&t.push(e)})),t.join(",")},toProduct:function(e){return console.log(e),this.goto(this.url+e.getProduct.id,1)}}};t.default=i},9912:function(e,t,r){"use strict";r.r(t);var i=r("2e1c"),a=r.n(i);for(var o in i)"default"!==o&&function(e){r.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},"9d044":function(e,t,r){"use strict";var i;r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return i}));var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("page",{ref:"page",attrs:{parentData:e.data,formAction:e.formAction}}),r("v-uni-view",{staticClass:"pay detail"},[r("v-uni-view",{staticClass:"block-sec people-info"},[r("weui-input",{attrs:{label:"功德主姓名",type:"text",name:"bless_name",datatype:"require",maxlength:6},model:{value:e.ruleform.bless_name,callback:function(t){e.$set(e.ruleform,"bless_name",t)},expression:"ruleform.bless_name"}}),r("weui-input",{attrs:{label:"功德主手机",type:"number",name:"phone",datatype:"require"},model:{value:e.ruleform.phone,callback:function(t){e.$set(e.ruleform,"phone",t)},expression:"ruleform.phone"}}),r("dx-address",{ref:"address",attrs:{datatype:"require",labeltxt:"所在地区"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.selectAddressCallBack.apply(void 0,arguments)}},model:{value:e.ruleform.bless_address,callback:function(t){e.$set(e.ruleform,"bless_address",t)},expression:"ruleform.bless_address"}}),r("weui-input",{attrs:{type:"text",name:"bless_address2",placeholder:"请输入地址",label:"地址",datatype:"require"},model:{value:e.ruleform.bless_address2,callback:function(t){e.$set(e.ruleform,"bless_address2",t)},expression:"ruleform.bless_address2"}}),r("weui-input",{attrs:{type:"textarea",name:"remark",placeholder:"请输入备注"},model:{value:e.ruleform.remark,callback:function(t){e.$set(e.ruleform,"remark",t)},expression:"ruleform.remark"}}),e.ruleform.can_post?r("weui-input",{attrs:{type:"switch",name:"is_post",label:"邮寄"},model:{value:e.ruleform.is_post,callback:function(t){e.$set(e.ruleform,"is_post",t)},expression:"ruleform.is_post"}}):e._e(),e.ruleform.can_post?r("weui-input",{attrs:{label:"邮寄",name:"is_post",changeField:"value",type:"radio",dataKey:"sendTypeArr",radioType:!1},model:{value:e.ruleform.is_post,callback:function(t){e.$set(e.ruleform,"is_post",t)},expression:"ruleform.is_post"}}):e._e(),e.ruleform.can_post&&1==e.ruleform.is_post?r("weui-input",{attrs:{type:"text",name:"post_address",label:"邮寄地址",datatype:"require"},model:{value:e.ruleform.post_address,callback:function(t){e.$set(e.ruleform,"post_address",t)},expression:"ruleform.post_address"}}):e._e()],1),r("v-uni-view",{staticClass:"block-sec"},[r("orderPro",{attrs:{data:e.data.detail.products}})],1),r("v-uni-view",{staticClass:"block-sec",attrs:{id:"calculation"}},[r("v-uni-view",{staticClass:"list-group"},[r("v-uni-view",{staticClass:"txt"},[e._v("运费")]),r("v-uni-view",{staticClass:"value fs-16 price"},[e._v("￥"+e._s(parseFloat(e.yunfei)))])],1),r("v-uni-view",{staticClass:"list-group"},[r("v-uni-view",{staticClass:"txt"},[e._v("合计随喜")]),r("v-uni-view",{staticClass:"value fs-16 price"},[e._v(e._s(parseFloat(e.ruleform.amount)+parseFloat(e.yunfei))),r("v-uni-text",{staticClass:"fc-3 pl3"},[e._v("元")])],1)],1)],1),r("v-uni-view",{staticClass:"m20"},[r("v-uni-view",{staticClass:"dx-btn dx-btn-lg dx-btn-red-gradual w-b100 bdr25",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.formSubmit()}}},[e._v("微信支付结缘")])],1)],1)],1)},o=[]},cf18:function(e,t,r){"use strict";r.r(t);var i=r("5c54"),a=r.n(i);for(var o in i)"default"!==o&&function(e){r.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},d8b7:function(e,t,r){var i=r("192b");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=r("4f06").default;a("6d76a3ac",i,!0,{sourceMap:!1,shadowMode:!1})},efcc:function(e,t,r){"use strict";r.r(t);var i=r("9d044"),a=r("9912");for(var o in a)"default"!==o&&function(e){r.d(t,e,(function(){return a[e]}))}(o);var s,n=r("f0c5"),l=Object(n["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);t["default"]=l.exports},fea7:function(e,t,r){var i=r("1402");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=r("4f06").default;a("b2e5020c",i,!0,{sourceMap:!1,shadowMode:!1})}}]);