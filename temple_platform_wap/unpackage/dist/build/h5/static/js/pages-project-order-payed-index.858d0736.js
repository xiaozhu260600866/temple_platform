(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-project-order-payed-index"],{"0aea":function(t,e,i){"use strict";i.r(e);var n=i("851f"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},"0d3a":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("page",{ref:"page",attrs:{parentData:t.data,formAction:t.formAction}}),t.data.show?i("div",[3==t.data.detail.status?i("v-uni-view",{staticClass:"pay-top"},[i("v-uni-view",{staticClass:"iconfont icon-pay-yes"}),i("v-uni-view",{staticClass:"p"},[t._v("感恩您的发心！")]),i("v-uni-view",{staticClass:"p"},[t._v("您已成功随喜 "+t._s(t.data.detail.amount)+" 元")])],1):i("v-uni-view",{staticClass:"pay-top"},[i("v-uni-view",{staticClass:"iconfont icon-pay-no"}),i("v-uni-view",{staticClass:"p"},[t._v("支付失败")])],1),i("v-uni-view",{staticClass:"m20 mt0"},[i("v-uni-view",{staticClass:"dx-btn dx-btn-lg dx-btn-orange w-b100 mr10",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toIndex.apply(void 0,arguments)}}},[t._v("返回首页")]),i("v-uni-view",{staticClass:"mt10 flex"},[i("v-uni-view",{staticClass:"dx-btn dx-btn-lg dx-btn-green w-b100",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$refs.cert.ajax(t.data.detail,!0)}}},[t._v("功德证书")]),i("v-uni-view",{staticClass:"dx-btn dx-btn-lg dx-btn-green w-b100 ml10",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$refs.receipt.ajax(t.data.detail,!0)}}},[t._v("电子收据")]),2==t.data.detail.project_type?i("v-uni-view",{staticClass:"dx-btn dx-btn-lg dx-btn-green w-b100 ml10",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goto("/pages/meal_coupon/lists/index",1)}}},[t._v("电子餐券")]):t._e()],1)],1),i("v-uni-view",{staticClass:"line-title flex-middle plr15 ptb10"},[i("v-uni-view",{staticClass:"line lline mr15"}),i("v-uni-view",{staticClass:"name fs-12 fc-9 lh-20 text-center"},[t._v("看看其他行善积福内容")]),i("v-uni-view",{staticClass:"line rline ml15"})],1),i("projectLists",{attrs:{lists:t.data.lists}}),i("receipt",{ref:"receipt"}),i("cert",{ref:"cert"})],1):t._e()],1)},r=[]},"24f1":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:["lists"],data:function(){return{}}};e.default=n},2811:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("v-uni-view",{staticClass:"poster"},["pages/user/order/project"==t.url?i("v-uni-image",{attrs:{src:t.cert2,hidden:!0},on:{load:function(e){arguments[0]=e=t.$handleEvent(e),t.imageLoad.apply(void 0,arguments)}}}):t._e(),"pages/user/order/project"!=t.url?i("v-uni-image",{attrs:{src:t.cert2,hidden:!0},on:{load:function(e){arguments[0]=e=t.$handleEvent(e),t.imageLoad.apply(void 0,arguments)}}}):t._e(),i("v-uni-canvas",{style:"width: "+t.width+"px; height: 1050rpx;left:-1300px",attrs:{"canvas-id":"secondCanvas"}}),i("img",{attrs:{src:t.tempFilePath,preview:"1",id:"temp1"}})],1):t._e()},r=[]},"4f86":function(t,e,i){"use strict";i.r(e);var n=i("869e"),a=i("f5b6");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);var s,o=i("f0c5"),l=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=l.exports},"7e39":function(t,e,i){"use strict";i.r(e);var n=i("0d3a"),a=i("c7d8");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);var s,o=i("f0c5"),l=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=l.exports},"851f":function(t,e,i){"use strict";i("4160"),i("a15b"),i("fb6a"),i("4d63"),i("ac1f"),i("25f0"),i("5319"),i("1276"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={components:{},data:function(){return{posterShow:!0,formAction:"/project/order/detail",width:400,tempFilePath:"",show:!1,height:600,rpx:0,images:[],data:this.formatData(this),price:"1888.88",order:{},open:!0,url:"",cert2:"",priceArr:[]}},onLoad:function(){},methods:{ajax:function(t,e){var i=this,n=getCurrentPages(),a=n[n.length-1];if(this.url=a.route,this.open=e,this.cert2=this.getSiteName()+"/upload/images/product/"+this.getParent(this).data.siteConfig.cert_logo,console.log("cert2",this.cert2),this.tempFilePath)setTimeout((function(){uni.previewImage({current:i.tempFilePath,urls:[i.tempFilePath]})}),500);else{uni.getSystemInfo({success:function(t){i.width=t.windowWidth,i.height=t.windowHeight,i.rpx=t.windowWidth/375}}),this.order=t,this.price=t.amount;var r=new Date(t.payed_at.replace(new RegExp(/-/gm),"/"));this.order.year=r.getFullYear(),this.order.month=r.getMonth()+1,this.order.month=this.order.month<10?"0"+this.order.month:this.order.month,this.order.date=r.getDate(),this.order.date=this.order.date<10?"0"+this.order.date:this.order.date,this.show=!0,this.convertCurrency(this.price),this.open&&uni.showLoading({title:"加载中"})}},imageLoad:function(t){var e=this,i=t.detail.width,n=t.detail.height,a=i/n,r=this.width,s=this.width/a,o=uni.createCanvasContext("secondCanvas"),l=this.rpx;"pages/user/order/project"==this.url||this.url,o.drawImage(this.cert2,0,0,r,s),o.setFontSize(16),o.setFillStyle("#000"),o.fillText(this.order.bless_name,158*l,199*l),o.setFontSize(16),o.setFillStyle("#000"),o.fillText(this.order.projects.name,140*l,227*l),o.setFontSize(16),o.setFillStyle("#000"),o.fillText(this.getAmount(this.order.amount)+" 份",140*l,256*l),o.setFontSize(16),o.setFillStyle("#000"),o.fillText(this.order.year+"-"+this.order.month+"-"+this.order.date,140*l,285*l),o.draw(),this.show=!0,setTimeout((function(){uni.canvasToTempFilePath({canvasId:"secondCanvas",success:function(t){console.log(t),e.tempFilePath=t.tempFilePath,e.open&&(uni.hideLoading(),e.updateUrl(["/pages/user/index/index"]),setTimeout((function(){uni.previewImage({current:e.tempFilePath,urls:[e.tempFilePath]}),e.show=!1}),500))},fail:function(t){console.log(t)}})}),200)},drawArticle:function(t,e,i,n,a){for(var r=e.split(""),s="",o=[],l=0;l<r.length;l++)t.measureText(s).width<i?s+=r[l]:(l--,o.push(s),s="");o.push(s);for(var c=0;c<o.length;c++)c<3&&t.fillText(o[c],n,a+19*c);var u=o.length>3?3:o.length;return a+19*(u-1)},num2Chinaese:function(t){return 0==t?"零":1==t?"壹":2==t?"贰":3==t?"叁":4==t?"肆":5==t?"伍":6==t?"陆":7==t?"柒":8==t?"捌":9==t?"玖":void 0},convertCurrency:function(t){var e=this,i=t.split("."),n=(Array(7).join(0)+i[0]).slice(-7),a=n.split(""),r=i[1],s=r.split(""),o=0;return a.forEach((function(t){e.priceArr[o]=e.num2Chinaese(t),o++})),s.forEach((function(t){e.priceArr[o]=e.num2Chinaese(t),o++})),1}}};e.default=n},"869e":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("v-uni-view",{staticClass:"poster"},["pages/user/order/project"==t.url?i("v-uni-image",{attrs:{src:t.receipt,hidden:!0},on:{load:function(e){arguments[0]=e=t.$handleEvent(e),t.imageLoad.apply(void 0,arguments)}}}):t._e(),"pages/user/order/project"!=t.url?i("v-uni-image",{attrs:{src:t.receipt,hidden:!0},on:{load:function(e){arguments[0]=e=t.$handleEvent(e),t.imageLoad.apply(void 0,arguments)}}}):t._e(),i("v-uni-canvas",{style:"width: "+t.width+"px; height: 400rpx;left:-1400px",attrs:{"canvas-id":"firstCanvas"}}),i("img",{attrs:{src:t.tempFilePath,preview:"1",id:"temp"}})],1):t._e()},r=[]},9850:function(t,e,i){"use strict";i.r(e);var n=i("2811"),a=i("0aea");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);var s,o=i("f0c5"),l=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=l.exports},"9b5c":function(t,e,i){"use strict";var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("ade3"));i("e8c7");var r,s=n(i("9c28")),o=n(i("4f86")),l=n(i("9850")),c=(r={components:{projectLists:s.default,receipt:o.default,cert:l.default},data:function(){return{formAction:"/project/order/detail",mpType:"page",data:this.formatData(this),getSiteName:this.getSiteName()}},onPullDownRefresh:function(){this.data.nextPage=1,this.ajax()},onShareAppMessage:function(){return this.shareSource(this,"商城")},onLoad:function(t){this.ajax()}},(0,a.default)(r,"onLoad",(function(){this.ajax()})),(0,a.default)(r,"onShow",(function(){this.onShow(this)})),(0,a.default)(r,"methods",{toIndex:function(){window.location.href="https://temple-platform.doxinsoft.com/h5?site_name="+uni.getStorageSync("site_name")},ajax:function(){this.getAjax(this).then((function(t){}))}}),r);e.default=c},"9c28":function(t,e,i){"use strict";i.r(e);var n=i("f038"),a=i("e97b");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);var s,o=i("f0c5"),l=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=l.exports},c7d8:function(t,e,i){"use strict";i.r(e);var n=i("9b5c"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},e8c7:function(t,e,i){var n=i("f084");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("02819140",n,!0,{sourceMap:!1,shadowMode:!1})},e97b:function(t,e,i){"use strict";i.r(e);var n=i("24f1"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},f038:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{attrs:{id:"project_list"}},t._l(t.lists.data,(function(e){return i("v-uni-view",{staticClass:"list"},[i("v-uni-view",{staticClass:"item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),1==e.type?t.goto("/pages/project/show/index?id="+e.id,1):t.goto("/pages/meal_coupon/buy/index?project_id="+e.id,1)}}},[i("v-uni-view",{staticClass:"limg"},[i("img",{staticClass:"img",attrs:{src:e.firstCover}})]),i("v-uni-view",{staticClass:"rtxt flex1"},[i("v-uni-view",{staticClass:"rtt"},[i("v-uni-view",{staticClass:"tt wrap2"},[t._v(t._s(e.name))]),e.intro?i("v-uni-view",{staticClass:"td wrap2"},[t._v(t._s(e.intro||""))]):t._e()],1),i("v-uni-view",{staticClass:"rtb"},[i("span",{staticClass:"iconfont icon-heart-o"}),t._v("共"),i("span",{staticClass:"num"},[t._v(t._s(t.getAmount(e.orderSum)))]),t._v("份随喜")])],1)],1)],1)})),1)},r=[]},f084:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".line-title .line{width:100%;height:1px;-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow:hidden;width:100%}.line-title .lline{background-image:-webkit-linear-gradient(left,#f5f5f5,#aaa);background-image:linear-gradient(90deg,#f5f5f5,#aaa)}.line-title .rline{background-image:-webkit-linear-gradient(left,#aaa,#f5f5f5);background-image:linear-gradient(90deg,#aaa,#f5f5f5)}.pay-top{padding:30px 0;text-align:center}.pay-top .iconfont{font-size:70px;line-height:80px}.pay-top .p{font-size:18px;line-height:26px}img{width:100%;border:none}.thanksWord{background:url(http://mat1.gtimg.com/gongyi/m/wx/thanks_page/sloganBg.png) no-repeat;width:90%;padding-top:14px;margin-left:5%;margin-right:5%;height:58px;background-size:100% 100%;color:#fff;font-weight:100;font-size:15px;text-align:center;position:absolute;bottom:0;font-family:arial}#fukun{position:relative}.thanksWord .first_row{display:block;line-height:18px;margin-top:5px}.thanksWord .second_row{display:inline-block;line-height:18px;font-size:12px}.fix{position:fixed;bottom:0;text-align:center;background:#ff7713;color:#fff;line-height:40px;width:100%}.fix a{color:#fff}",""]),t.exports=e},f467:function(t,e,i){"use strict";i("c975"),i("4d63"),i("ac1f"),i("25f0"),i("5319"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={components:{},data:function(){return{posterShow:!0,formAction:"/project/order/detail",width:400,tempFilePath:"",show:!1,height:600,rpx:0,images:[],data:this.formatData(this),price:"1888.88",order:{},url:"",open:!0,images2:{},priceArr:[],receipt:""}},onLoad:function(){},methods:{imageLoad2:function(t){var e=t.detail.width,i=200,n=e/i;console.log(t);var a=this.width,r=(this.width,{});r={width:a,height:200},console.log(r),console.log(124),this.images2=r},ajax:function(t,e){var i=this,n=getCurrentPages(),a=n[n.length-1];if(this.url=a.route,this.open=e,this.receipt=this.getSiteName()+"/upload/images/product/"+this.getParent(this).data.siteConfig.receipt_logo,this.tempFilePath)setTimeout((function(){uni.previewImage({current:i.tempFilePath,urls:[i.tempFilePath]})}),500);else{uni.getSystemInfo({success:function(t){i.width=t.windowWidth,i.height=t.windowHeight,i.rpx=t.windowWidth/375}}),this.order=t,this.price=t.amount;var r=new Date(t.payed_at.replace(new RegExp(/-/gm),"/"));this.order.year=r.getFullYear(),this.order.month=r.getMonth()+1,this.order.month=this.order.month<10?"0"+this.order.month:this.order.month,this.order.date=r.getDate(),this.order.date=this.order.date<10?"0"+this.order.date:this.order.date,this.show=!0,this.convertCurrency(this.price),this.open&&uni.showLoading({title:"加载中"})}},imageLoad:function(t){var e=this,i=t.detail.width,n=t.detail.height,a=i/n,r=this.width,s=this.width/a,o=uni.createCanvasContext("firstCanvas");console.log(s),"pages/user/order/project"==this.url||this.url,o.drawImage(this.receipt,0,0,r,s);var l=this.rpx;o.setFontSize(10),o.setFillStyle("#603217"),o.fillText(this.order.year,125*l,48*l),o.setFontSize(10),o.setFillStyle("#603217"),o.fillText(this.order.month,170*l,48*l),o.setFontSize(10),o.setFillStyle("#603217"),o.fillText(this.order.date,200*l,48*l),o.setFontSize(9),o.setFillStyle("#ff0000"),o.fillText(this.order.order_no,278*l,49*l),o.setFontSize(10),o.setFillStyle("#603217"),o.fillText(this.order.bless_name,90*l,78*l),o.setFontSize(10),o.setFillStyle("#603217");var c=this.convertCurrency(this.price);o.fillText(c,110*l,104*l),o.setFontSize(10),o.setFillStyle("#603217"),o.fillText(this.order.projects.name,70*l,127*l),o.setFontSize(10),o.setFillStyle("#603217"),o.fillText("微信支付",275*l,78*l),o.setFontSize(10),o.setFillStyle("#603217"),o.fillText("￥"+this.price,290*l,104*l),o.draw(),this.show=!0,setTimeout((function(){uni.canvasToTempFilePath({canvasId:"firstCanvas",success:function(t){console.log(t),e.tempFilePath=t.tempFilePath,e.open&&(uni.hideLoading(),setTimeout((function(){e.updateUrl(["/pages/user/index/index"]),uni.previewImage({current:e.tempFilePath,urls:[e.tempFilePath]}),e.show=!1}),500))},fail:function(t){console.log(t)}})}),200)},drawArticle:function(t,e,i,n,a){for(var r=e.split(""),s="",o=[],l=0;l<r.length;l++)t.measureText(s).width<i?s+=r[l]:(l--,o.push(s),s="");o.push(s);for(var c=0;c<o.length;c++)c<3&&t.fillText(o[c],n,a+19*c);var u=o.length>3?3:o.length;return a+19*(u-1)},convertCurrency:function(t){var e="仟佰拾亿仟佰拾万仟佰拾元角分",i="";t+="00";var n=t.indexOf("-");if(-1!=n){t=t.substring(1);var a=t.indexOf(".");a>=0&&(t=t.substring(0,a)+t.substr(a+1,2)),e=e.substr(e.length-t.length);for(var r=0;r<t.length;r++)i+="".charAt(t.charAt(r))+e.charAt(r);return"负数"+i.replace(/零(仟|佰|拾|角)/g,"零").replace(/(零)+/g,"零").replace(/零(万|亿|元)/g,"$1").replace(/(亿)万/g,"$1").replace(/^元零?|零分/g,"").replace(/元$/g,"元整").replace(/角$/g,"角整")}a=t.indexOf(".");a>=0&&(t=t.substring(0,a)+t.substr(a+1,2)),e=e.substr(e.length-t.length);for(r=0;r<t.length;r++)i+="零壹贰叁肆伍陆柒捌玖".charAt(t.charAt(r))+e.charAt(r);return i.replace(/零(仟|佰|拾|角)/g,"零").replace(/(零)+/g,"零").replace(/零(万|亿|元)/g,"$1").replace(/(亿)万/g,"$1").replace(/^元零?|零分/g,"").replace(/元$/g,"元整").replace(/角$/g,"角整")}}};e.default=n},f5b6:function(t,e,i){"use strict";i.r(e);var n=i("f467"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a}}]);