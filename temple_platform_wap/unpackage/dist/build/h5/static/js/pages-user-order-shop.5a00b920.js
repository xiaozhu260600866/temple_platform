(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-order-shop"],{"0aea":function(t,e,i){"use strict";i.r(e);var r=i("851f"),n=i.n(r);for(var a in r)"default"!==a&&function(t){i.d(e,t,(function(){return r[t]}))}(a);e["default"]=n.a},"1a2a":function(t,e,i){var r=i("43a2");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var n=i("4f06").default;n("449f8266",r,!0,{sourceMap:!1,shadowMode:!1})},"246c":function(t,e,i){"use strict";var r=i("1a2a"),n=i.n(r);n.a},2811:function(t,e,i){"use strict";var r;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return r}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("v-uni-view",{staticClass:"poster"},["pages/user/order/project"==t.url?i("v-uni-image",{attrs:{src:t.cert2,hidden:!0},on:{load:function(e){arguments[0]=e=t.$handleEvent(e),t.imageLoad.apply(void 0,arguments)}}}):t._e(),"pages/user/order/project"!=t.url?i("v-uni-image",{attrs:{src:t.cert2,hidden:!0},on:{load:function(e){arguments[0]=e=t.$handleEvent(e),t.imageLoad.apply(void 0,arguments)}}}):t._e(),i("v-uni-canvas",{style:"width: "+t.width+"px; height: 1050rpx;left:-1300px",attrs:{"canvas-id":"secondCanvas"}}),i("img",{attrs:{src:t.tempFilePath,preview:"1",id:"temp1"}})],1):t._e()},a=[]},"33cc":function(t,e,i){"use strict";var r;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return r}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{class:["order_pro",t.myclass?t.myclass:""]},t._l(t.data,(function(e,r){return i("v-uni-view",{staticClass:"order_info"},[i("v-uni-view",{staticClass:"opro_img"},[i("v-uni-image",{staticClass:"img",attrs:{src:e.getProduct.firstCover,mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"opro_info"},[i("v-uni-view",{staticClass:"Titem"},[i("v-uni-view",{staticClass:"left"},[i("v-uni-view",{staticClass:"name"},[t._v(t._s(e.getProduct.name))]),e.attribute?i("v-uni-view",{staticClass:"specs"},[t._v(t._s(e.attribute))]):t._e()],1),i("v-uni-view",{staticClass:"right"},[i("v-uni-view",{staticClass:"price"},[t._v("￥"+t._s(t.toFixed(e.amount/e.num)))]),i("v-uni-view",{staticClass:"num"},[t._v("x "+t._s(e.num))])],1)],1),i("v-uni-view",{staticClass:"scount fs-14"},[t._v("小计："),i("v-uni-text",{staticClass:"Arial"},[t._v(t._s(e.amount))]),t._v("元")],1)],1)],1)})),1)},a=[]},"379c":function(t,e,i){"use strict";i.r(e);var r=i("33cc"),n=i("cf18");for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);i("246c");var o,s=i("f0c5"),l=Object(s["a"])(n["default"],r["b"],r["c"],!1,null,"9143d3c4",null,!1,r["a"],o);e["default"]=l.exports},"43a2":function(t,e,i){var r=i("24fb");e=r(!1),e.push([t.i,".order_pro[data-v-9143d3c4]{padding:0 %?20?%}.order_info[data-v-9143d3c4]{display:-webkit-box;display:-webkit-flex;display:flex;padding:%?20?% 0;border-bottom:%?1?% #f5f5f5 dashed}.order_info[data-v-9143d3c4]:last-child{border-bottom:0}.order_info .opro_img[data-v-9143d3c4]{padding-right:%?20?%}.order_info .opro_img .img[data-v-9143d3c4]{width:%?140?%;height:%?140?%;display:-webkit-box;display:-webkit-flex;display:flex;border-radius:%?6?%}.order_info .opro_info[data-v-9143d3c4]{-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-content:space-between;align-content:space-between}.order_info .Titem[data-v-9143d3c4]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;width:100%;line-height:%?40?%;font-size:%?30?%;color:#333}.order_info .Titem .left[data-v-9143d3c4]{-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow:hidden}.order_info .Titem .right[data-v-9143d3c4]{text-align:right;padding-left:%?20?%}.order_info .Titem .name[data-v-9143d3c4]{font-size:%?32?%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.order_info .Titem .specs[data-v-9143d3c4]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:#666}.order_info .Titem .num[data-v-9143d3c4]{color:#666}.order_info .scount[data-v-9143d3c4]{text-align:right;width:100%}",""]),t.exports=e},"49b2":function(t,e,i){var r=i("fb14");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var n=i("4f06").default;n("0c70cdca",r,!0,{sourceMap:!1,shadowMode:!1})},"4f86":function(t,e,i){"use strict";i.r(e);var r=i("869e"),n=i("f5b6");for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);var o,s=i("f0c5"),l=Object(s["a"])(n["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],o);e["default"]=l.exports},"50a0":function(t,e,i){"use strict";var r;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return r}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-input",{staticClass:"dx-input",attrs:{value:t.currentValue,hidden:!0}}),i("v-uni-view",{staticClass:"dxi-tabs-view",class:[t.isFixed?"dxi-tabs-fixed":"dxi-tabs-relative",t.unlined?"dxi-unlined":""],style:{height:t.height+"rpx",padding:"0 "+t.padding+"rpx",background:t.bgColor,top:t.isFixed?t.top+"px":"auto",zIndex:t.zIndex}},[t._l(t.tabs,(function(e,r){return i("v-uni-view",{key:r,staticClass:"dxi-tabs-item",style:{width:t.itemWidth},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.swichTabs(r)}}},[i("v-uni-view",{staticClass:"dxi-tabs-title",class:{"dxi-tabs-active":t.currentTab==r,"dxi-tabs-disabled":e.disabled},style:{color:t.currentTab==r?t.selectedColor:t.color,fontSize:t.currentTab==r?t.selectedSize+"rpx":t.size+"rpx",lineHeight:t.currentTab==r?t.selectedSize+"rpx":t.size+"rpx",fontWeight:t.bold&&t.currentTab==r?"bold":"normal"}},[i("v-uni-text",[t._v(t._s(e.name))]),e.num?i("v-uni-text",{staticClass:"Arial"},[t._v("("+t._s(e.num)+")")]):t._e()],1)],1)})),i("v-uni-view",{staticClass:"dxi-tabs-slider",style:{transform:"translateX("+t.scrollLeft+"px)",width:t.sliderWidth+"rpx",height:t.sliderHeight+"rpx",borderRadius:t.sliderRadius,bottom:t.bottom,background:t.sliderBgColor,marginBottom:"50%"==t.bottom?"-"+t.sliderHeight/2+"rpx":0}})],2),t._t("default")],2)},a=[]},"55c1":function(t,e,i){"use strict";var r=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("49b2");var n=r(i("4f86")),a=r(i("9850")),o=r(i("b3ab")),s=r(i("379c")),l={components:{cert:a.default,receipt:n.default,dxTabs:o.default,orderPro:s.default},data:function(){return{formAction:"/shop/user/order-lists",mpType:"page",data:this.formatData(this),getSiteName:this.getSiteName(),openDiag:!1,status:3,message:!1,tabs:[{name:"按项目归类",value:0},{name:"按时间排列",value:1}]}},onPullDownRefresh:function(){this.data.nextPage=1,this.ajax()},onShareAppMessage:function(){return this.shareSource(this,"商城")},onLoad:function(t){this.ajax()},onShow:function(){this.openDiag&&window.location.reload(),this.onShow(this,1)},methods:{change:function(t){this.ajax()},ajax:function(){var t=this;this.getAjax(this).then((function(e){console.log(t.data)}))}}};e.default=l},"5c54":function(t,e,i){"use strict";i("4160"),i("a15b"),i("ac1f"),i("1276"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={props:["data","myclass"],data:function(){return{}},methods:{getAttribute:function(t){var e=[];return t.split(",").forEach((function(t,i){0!=i&&e.push(t)})),e.join(",")},toProduct:function(t){return console.log(t),this.goto(this.url+t.getProduct.id,1)}}};e.default=r},"6db6":function(t,e,i){var r=i("24fb");e=r(!1),e.push([t.i,'.dxi-tabs-view[data-v-b38fd350]{width:100%;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.dxi-tabs-relative[data-v-b38fd350]{position:relative}.dxi-tabs-fixed[data-v-b38fd350]{position:fixed;left:0}.dxi-tabs-fixed[data-v-b38fd350]::before,\r\n.dxi-tabs-relative[data-v-b38fd350]::before{content:"";position:absolute;border-bottom:%?1?% solid #eaeef1;-webkit-transform:scaleY(.5);transform:scaleY(.5);bottom:0;right:0;left:0}.dxi-unlined[data-v-b38fd350]::before{border-bottom:0!important}.dxi-tabs-item[data-v-b38fd350]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.dxi-tabs-disabled[data-v-b38fd350]{opacity:.6}.dxi-tabs-title[data-v-b38fd350]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;z-index:2}.dxi-tabs-active[data-v-b38fd350]{-webkit-transition:all .15s ease-in-out;transition:all .15s ease-in-out}.dxi-tabs-slider[data-v-b38fd350]{position:absolute;left:0;-webkit-transition:all .15s ease-in-out;transition:all .15s ease-in-out;z-index:0;-webkit-transform:translateZ(0);transform:translateZ(0)}',""]),t.exports=e},"6dc8":function(t,e,i){"use strict";i.r(e);var r=i("bacf"),n=i.n(r);for(var a in r)"default"!==a&&function(t){i.d(e,t,(function(){return r[t]}))}(a);e["default"]=n.a},"6ef9":function(t,e,i){"use strict";var r=i("c685"),n=i.n(r);n.a},"851f":function(t,e,i){"use strict";i("4160"),i("a15b"),i("fb6a"),i("4d63"),i("ac1f"),i("25f0"),i("5319"),i("1276"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={components:{},data:function(){return{posterShow:!0,formAction:"/project/order/detail",width:400,tempFilePath:"",show:!1,height:600,rpx:0,images:[],data:this.formatData(this),price:"1888.88",order:{},open:!0,url:"",cert2:"",priceArr:[]}},onLoad:function(){},methods:{ajax:function(t,e){var i=this,r=getCurrentPages(),n=r[r.length-1];if(this.url=n.route,this.open=e,this.cert2=this.getSiteName()+"/upload/images/product/"+this.getParent(this).data.siteConfig.cert_logo,console.log("cert2",this.cert2),this.tempFilePath)setTimeout((function(){uni.previewImage({current:i.tempFilePath,urls:[i.tempFilePath]})}),500);else{uni.getSystemInfo({success:function(t){i.width=t.windowWidth,i.height=t.windowHeight,i.rpx=t.windowWidth/375}}),this.order=t,this.price=t.amount;var a=new Date(t.payed_at.replace(new RegExp(/-/gm),"/"));this.order.year=a.getFullYear(),this.order.month=a.getMonth()+1,this.order.month=this.order.month<10?"0"+this.order.month:this.order.month,this.order.date=a.getDate(),this.order.date=this.order.date<10?"0"+this.order.date:this.order.date,this.show=!0,this.convertCurrency(this.price),this.open&&uni.showLoading({title:"加载中"})}},imageLoad:function(t){var e=this,i=t.detail.width,r=t.detail.height,n=i/r,a=this.width,o=this.width/n,s=uni.createCanvasContext("secondCanvas"),l=this.rpx;"pages/user/order/project"==this.url||this.url,s.drawImage(this.cert2,0,0,a,o),s.setFontSize(16),s.setFillStyle("#000"),s.fillText(this.order.bless_name,158*l,199*l),s.setFontSize(16),s.setFillStyle("#000"),s.fillText(this.order.projects.name,140*l,227*l),s.setFontSize(16),s.setFillStyle("#000"),s.fillText(this.getAmount(this.order.amount)+" 份",140*l,256*l),s.setFontSize(16),s.setFillStyle("#000"),s.fillText(this.order.year+"-"+this.order.month+"-"+this.order.date,140*l,285*l),s.draw(),this.show=!0,setTimeout((function(){uni.canvasToTempFilePath({canvasId:"secondCanvas",success:function(t){console.log(t),e.tempFilePath=t.tempFilePath,e.open&&(uni.hideLoading(),e.updateUrl(["/pages/user/index/index"]),setTimeout((function(){uni.previewImage({current:e.tempFilePath,urls:[e.tempFilePath]}),e.show=!1}),500))},fail:function(t){console.log(t)}})}),200)},drawArticle:function(t,e,i,r,n){for(var a=e.split(""),o="",s=[],l=0;l<a.length;l++)t.measureText(o).width<i?o+=a[l]:(l--,s.push(o),o="");s.push(o);for(var d=0;d<s.length;d++)d<3&&t.fillText(s[d],r,n+19*d);var c=s.length>3?3:s.length;return n+19*(c-1)},num2Chinaese:function(t){return 0==t?"零":1==t?"壹":2==t?"贰":3==t?"叁":4==t?"肆":5==t?"伍":6==t?"陆":7==t?"柒":8==t?"捌":9==t?"玖":void 0},convertCurrency:function(t){var e=this,i=t.split("."),r=(Array(7).join(0)+i[0]).slice(-7),n=r.split(""),a=i[1],o=a.split(""),s=0;return n.forEach((function(t){e.priceArr[s]=e.num2Chinaese(t),s++})),o.forEach((function(t){e.priceArr[s]=e.num2Chinaese(t),s++})),1}}};e.default=r},"869e":function(t,e,i){"use strict";var r;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return r}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("v-uni-view",{staticClass:"poster"},["pages/user/order/project"==t.url?i("v-uni-image",{attrs:{src:t.receipt,hidden:!0},on:{load:function(e){arguments[0]=e=t.$handleEvent(e),t.imageLoad.apply(void 0,arguments)}}}):t._e(),"pages/user/order/project"!=t.url?i("v-uni-image",{attrs:{src:t.receipt,hidden:!0},on:{load:function(e){arguments[0]=e=t.$handleEvent(e),t.imageLoad.apply(void 0,arguments)}}}):t._e(),i("v-uni-canvas",{style:"width: "+t.width+"px; height: 400rpx;left:-1400px",attrs:{"canvas-id":"firstCanvas"}}),i("img",{attrs:{src:t.tempFilePath,preview:"1",id:"temp"}})],1):t._e()},a=[]},"96de":function(t,e,i){"use strict";i.r(e);var r=i("55c1"),n=i.n(r);for(var a in r)"default"!==a&&function(t){i.d(e,t,(function(){return r[t]}))}(a);e["default"]=n.a},9850:function(t,e,i){"use strict";i.r(e);var r=i("2811"),n=i("0aea");for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);var o,s=i("f0c5"),l=Object(s["a"])(n["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],o);e["default"]=l.exports},b3ab:function(t,e,i){"use strict";i.r(e);var r=i("50a0"),n=i("6dc8");for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);i("6ef9");var o,s=i("f0c5"),l=Object(s["a"])(n["default"],r["b"],r["c"],!1,null,"b38fd350",null,!1,r["a"],o);e["default"]=l.exports},ba11:function(t,e,i){"use strict";i.r(e);var r=i("d157"),n=i("96de");for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);var o,s=i("f0c5"),l=Object(s["a"])(n["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],o);e["default"]=l.exports},bacf:function(t,e,i){"use strict";i("4160"),i("a9e3"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={name:"dxiTabs",props:{tabs:{type:Array,default:function(){return[]}},height:{type:Number,default:80},padding:{type:Number,default:30},bgColor:{type:String,default:"#FFFFFF"},isFixed:{type:Boolean,default:!1},top:{type:Number,default:44},unlined:{type:Boolean,default:!1},sliderWidth:{type:Number,default:68},sliderHeight:{type:Number,default:6},sliderBgColor:{type:String,default:"#5677fc"},sliderRadius:{type:String,default:"50rpx"},value:{type:String,default:""},bottom:{type:String,default:"0"},color:{type:String,default:"#666"},selectedColor:{type:String,default:"#5677fc"},size:{type:Number,default:28},selectedSize:{type:Number,default:28},bold:{type:Boolean,default:!1},zIndex:{type:Number,default:99}},watch:{currentTab:function(){this.checkCor()}},created:function(){var t=this;setTimeout((function(){uni.getSystemInfo({success:function(e){t.winWidth=e.windowWidth,t.checkCor()}});var e=100/t.tabs.length;t.itemWidth=e+"%",t.tabs.length&&t.value&&!t.init&&t.tabs.forEach((function(e,i){t.value==e.value&&(t.currentTab=i,t.init=!0)}))}),50)},data:function(){return{winWidth:0,scrollLeft:0,itemWidth:"25%",currentTab:0,init:!1}},computed:{currentValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{checkCor:function(){var t=this.tabs.length,e=this.winWidth/750*this.padding,i=this.winWidth-2*e,r=(i/t-this.winWidth/750*this.sliderWidth)/2+e,n=r;this.currentTab>0&&(n+=i/t*this.currentTab),this.scrollLeft=n},swichTabs:function(t){var e=this.tabs[t];if(console.log(this.currentValue),!e||!e.disabled)return this.currentTab!=t&&(this.currentValue=e.value,this.currentTab=t,void this.$emit("change",{index:Number(t)}))}}};e.default=r},c685:function(t,e,i){var r=i("6db6");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var n=i("4f06").default;n("2799a2f6",r,!0,{sourceMap:!1,shadowMode:!1})},cf18:function(t,e,i){"use strict";i.r(e);var r=i("5c54"),n=i.n(r);for(var a in r)"default"!==a&&function(t){i.d(e,t,(function(){return r[t]}))}(a);e["default"]=n.a},d157:function(t,e,i){"use strict";var r;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return r}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("page",{ref:"page",attrs:{parentData:t.data,formAction:t.formAction}}),t.data.show?i("v-uni-view",[i("v-uni-view",{staticClass:"shop_order"},t._l(t.data.lists.data,(function(e){return i("v-uni-view",{staticClass:"order_item"},[i("v-uni-view",{staticClass:"top_date plr10"},[i("v-uni-view",{staticClass:"time fs-14 fc-6 lh-18"},[i("v-uni-view",[t._v("下单日期："),i("v-uni-text",{staticClass:"Arial"},[t._v(t._s(e.payed_at))])],1),i("v-uni-view",[t._v("订单序号："),i("v-uni-text",{staticClass:"Arial"},[t._v(t._s(e.order_no))])],1)],1),i("v-uni-view",{staticClass:"state flex-middle"})],1),i("orderPro",{attrs:{data:e.products}}),i("v-uni-view",{staticClass:"btn-group ptb8 plr10"},[i("v-uni-view",{staticClass:"btn-item"},[i("v-uni-view",{staticClass:"btn-nav",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openDiag=!0,t.$refs.receipt.ajax(e,!0)}}},[t._v("电子收据")]),i("v-uni-view",{staticClass:"btn-nav",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openDiag=!0,t.$refs.cert.ajax(e,!0)}}},[t._v("功德证书")])],1)],1)],1)})),1),i("hasMore",{attrs:{parentData:t.data}}),i("receipt",{ref:"receipt"}),i("cert",{ref:"cert"}),0==t.data.lists.data.length&&1==t.status?i("v-uni-view",{staticClass:"p50 text-center fc-9 fs-14"},[t._v("暂无数据")]):t._e()],1):t._e()],1)},a=[]},f467:function(t,e,i){"use strict";i("c975"),i("4d63"),i("ac1f"),i("25f0"),i("5319"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={components:{},data:function(){return{posterShow:!0,formAction:"/project/order/detail",width:400,tempFilePath:"",show:!1,height:600,rpx:0,images:[],data:this.formatData(this),price:"1888.88",order:{},url:"",open:!0,images2:{},priceArr:[],receipt:""}},onLoad:function(){},methods:{imageLoad2:function(t){var e=t.detail.width,i=200,r=e/i;console.log(t);var n=this.width,a=(this.width,{});a={width:n,height:200},console.log(a),console.log(124),this.images2=a},ajax:function(t,e){var i=this,r=getCurrentPages(),n=r[r.length-1];if(this.url=n.route,this.open=e,this.receipt=this.getSiteName()+"/upload/images/product/"+this.getParent(this).data.siteConfig.receipt_logo,this.tempFilePath)setTimeout((function(){uni.previewImage({current:i.tempFilePath,urls:[i.tempFilePath]})}),500);else{uni.getSystemInfo({success:function(t){i.width=t.windowWidth,i.height=t.windowHeight,i.rpx=t.windowWidth/375}}),this.order=t,this.price=t.amount;var a=new Date(t.payed_at.replace(new RegExp(/-/gm),"/"));this.order.year=a.getFullYear(),this.order.month=a.getMonth()+1,this.order.month=this.order.month<10?"0"+this.order.month:this.order.month,this.order.date=a.getDate(),this.order.date=this.order.date<10?"0"+this.order.date:this.order.date,this.show=!0,this.convertCurrency(this.price),this.open&&uni.showLoading({title:"加载中"})}},imageLoad:function(t){var e=this,i=t.detail.width,r=t.detail.height,n=i/r,a=this.width,o=this.width/n,s=uni.createCanvasContext("firstCanvas");console.log(o),"pages/user/order/project"==this.url||this.url,s.drawImage(this.receipt,0,0,a,o);var l=this.rpx;s.setFontSize(10),s.setFillStyle("#603217"),s.fillText(this.order.year,125*l,48*l),s.setFontSize(10),s.setFillStyle("#603217"),s.fillText(this.order.month,170*l,48*l),s.setFontSize(10),s.setFillStyle("#603217"),s.fillText(this.order.date,200*l,48*l),s.setFontSize(9),s.setFillStyle("#ff0000"),s.fillText(this.order.order_no,278*l,49*l),s.setFontSize(10),s.setFillStyle("#603217"),s.fillText(this.order.bless_name,90*l,78*l),s.setFontSize(10),s.setFillStyle("#603217");var d=this.convertCurrency(this.price);s.fillText(d,110*l,104*l),s.setFontSize(10),s.setFillStyle("#603217"),s.fillText(this.order.projects.name,70*l,127*l),s.setFontSize(10),s.setFillStyle("#603217"),s.fillText("微信支付",275*l,78*l),s.setFontSize(10),s.setFillStyle("#603217"),s.fillText("￥"+this.price,290*l,104*l),s.draw(),this.show=!0,setTimeout((function(){uni.canvasToTempFilePath({canvasId:"firstCanvas",success:function(t){console.log(t),e.tempFilePath=t.tempFilePath,e.open&&(uni.hideLoading(),setTimeout((function(){e.updateUrl(["/pages/user/index/index"]),uni.previewImage({current:e.tempFilePath,urls:[e.tempFilePath]}),e.show=!1}),500))},fail:function(t){console.log(t)}})}),200)},drawArticle:function(t,e,i,r,n){for(var a=e.split(""),o="",s=[],l=0;l<a.length;l++)t.measureText(o).width<i?o+=a[l]:(l--,s.push(o),o="");s.push(o);for(var d=0;d<s.length;d++)d<3&&t.fillText(s[d],r,n+19*d);var c=s.length>3?3:s.length;return n+19*(c-1)},convertCurrency:function(t){var e="仟佰拾亿仟佰拾万仟佰拾元角分",i="";t+="00";var r=t.indexOf("-");if(-1!=r){t=t.substring(1);var n=t.indexOf(".");n>=0&&(t=t.substring(0,n)+t.substr(n+1,2)),e=e.substr(e.length-t.length);for(var a=0;a<t.length;a++)i+="".charAt(t.charAt(a))+e.charAt(a);return"负数"+i.replace(/零(仟|佰|拾|角)/g,"零").replace(/(零)+/g,"零").replace(/零(万|亿|元)/g,"$1").replace(/(亿)万/g,"$1").replace(/^元零?|零分/g,"").replace(/元$/g,"元整").replace(/角$/g,"角整")}n=t.indexOf(".");n>=0&&(t=t.substring(0,n)+t.substr(n+1,2)),e=e.substr(e.length-t.length);for(a=0;a<t.length;a++)i+="零壹贰叁肆伍陆柒捌玖".charAt(t.charAt(a))+e.charAt(a);return i.replace(/零(仟|佰|拾|角)/g,"零").replace(/(零)+/g,"零").replace(/零(万|亿|元)/g,"$1").replace(/(亿)万/g,"$1").replace(/^元零?|零分/g,"").replace(/元$/g,"元整").replace(/角$/g,"角整")}}};e.default=r},f5b6:function(t,e,i){"use strict";i.r(e);var r=i("f467"),n=i.n(r);for(var a in r)"default"!==a&&function(t){i.d(e,t,(function(){return r[t]}))}(a);e["default"]=n.a},fb14:function(t,e,i){var r=i("24fb");e=r(!1),e.push([t.i,".pages-user-order-project,\r\n.pages-user-order-tablet{background:#fff}\r\n\r\n\r\n\r\n/* 类别 */.order-class{display:-webkit-box;display:-webkit-flex;display:flex}.order-class .nav-tab{text-align:center;width:100%}.order-class .name{height:44px;line-height:44px;font-size:15px;color:#666;display:inline-block}.order-class .selected{color:#a98853;border-bottom:3px solid #a98853}\r\n\r\n\r\n\r\n/* 项目列表 */.Oitem-list .pro-info .limg .img{width:84px;height:64px;border-radius:7px}.Oitem-list .pro-info .rt .td{color:#666}.Oitem-list .pro-info .rt .td span{color:red;margin:0 3px}.Oitem-list .btn-group .nav{padding:0 20px;height:30px;line-height:28px;border:1px #999 solid;font-size:13px;color:#333;border-radius:6px;margin-right:15px}.Oitem-list .btn-group .nav span{font-size:14px;padding-left:10px}.Otime-list .rinfo .nav{padding:0 10px;height:28px;line-height:26px;border:1px #999 solid;font-size:13px;color:#333;border-radius:6px;text-align:center}\r\n\r\n\r\n\r\n/* 商城列表 */\r\n\r\n\r\n\r\n/* 列表 */.order_item{background:#fff;margin:%?24?%;border-radius:%?12?%}.order_item .top_date{height:%?100?%;line-height:%?100?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:%?1?% #efefef solid}.btn-group{border-top:%?1?% #efefef solid}.btn-group .btn-item{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.btn-group .btn-item .btn-nav{min-width:%?160?%;height:%?64?%;line-height:%?64?%;border:%?1?% #fe4543 solid;border-radius:%?30?%;color:#555;font-size:%?30?%;text-align:center;margin-left:10px;display:block;padding:0 %?30?%}\r\n\r\n\r\n\r\n/* .order_item .btn-item .btn-nav:last-child{background: #FE4543;border: 0;color: #fff;line-height: 30px;}\r\n.order_item .btn-item .obtn{border: 1px #ddd solid!important;background: #fff!important;color: #555!important;} */\r\n\r\n\r\n\r\n/* 客房订单 */.room_order_item{background:#fff;margin:%?24?%;border-radius:%?12?%}.room_order_item .top_date{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:%?1?% #efefef solid}.room_order_item .con_info{display:-webkit-box;display:-webkit-flex;display:flex;padding:%?20?%}.room_order_item .cover .img{width:%?140?%;height:%?140?%;display:-webkit-box;display:-webkit-flex;display:flex;border-radius:%?8?%}.room_order_item .info{-webkit-box-flex:1;-webkit-flex:1;flex:1;margin-left:%?20?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-align-content:space-between;align-content:space-between;min-height:%?140?%;-webkit-flex-wrap:wrap;flex-wrap:wrap}.room_order_item .btn-nav{background-color:#fe4543;color:#fff!important}",""]),t.exports=e}}]);